{{ define "profiles" }}
<div class="row pt-5">
    <div class="col text-left">
        <h4>Renditions</h4>
    </div>
</div>
<div class="container-lg overflow-auto" style="min-width: 550px; overflow-x:scroll;">
    <div class=" row">
        <div class="col">
            <h6>Name</h6>
        </div>
        <div class="col" style="min-width: 45px;">
            <h6>Codec</h6>
        </div>
        <div class="col">
            <h6>Type</h6>
        </div>
        <div class="col">
            <h6>Width</h6>
        </div>
        <div class="col">
            <h6>Height</h6>
        </div>
        <div class="col">
            <h6>FPS</h6>
        </div>
        <div class="col">
            <h6>Color Depth</h6>
        </div>
        <div class="col">
            <h6>CRF</h6>
        </div>
        <div class="col">
            <h6>Preset</h6>
        </div>
    </div>
    <div class="row">
        <div class="col"><input class="form-control text-center" type="text" id="p1-name" value="240p"></div>
        <div class="col">
            <select class="form-control text-center" id="p1-codec">
                <option value="H.264">H264</option>
                <option selected value="AV1">AV1</option>
            </select>
        </div>
        <div class="col">
            <select class="form-control text-center" id="p1-type">
                <option selected value="ANY">ANY</option>
                <option value="CPU">CPU</option>
                <option value="HDW">Hardware</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p1-width" value="432"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p1-height" value="240"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p1-fps"></div>
        <div class="col">
            <select class="form-control text-center" id="p1-color-depth">
                <option selected value="0">8</option>
                <option value="2">10</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p1-crf" value="30"></div>
        <div class="col"><input class="form-control text-center" type="text" id="p1-preset" value="10"></div>
    </div>
    <div class="row">
        <div class="col-12 form-floating">
            <input class="form-control mt-2 mb-4" type="text" id="p1-params">
            <label for="p1-params">Params</label>
        </div>
    </div>
    <div class="row">
        <div class="col"><input class="form-control text-center" type="text" id="p2-name" value="480p"></div>
        <div class="col">
            <select class="form-control text-center" id="p2-codec">
                <option value="H.264">H264</option>
                <option selected value="AV1">AV1</option>
            </select>
        </div>
        <div class="col">
            <select class="form-control text-center" id="p2-type">
                <option selected value="ANY">ANY</option>
                <option value="CPU">CPU</option>
                <option value="HDW">Hardware</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p2-width" value="854"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p2-height" value="480"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p2-fps"></div>
        <div class="col">
            <select class="form-control text-center" id="p2-color-depth">
                <option value="0">8</option>
                <option selected value="2">10</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p2-crf" value="30"></div>
        <div class="col"><input class="form-control text-center" type="text" id="p2-preset" value="10"></div>
    </div>
    <div class="row">
        <div class="col-12 form-floating">
            <input class="form-control mt-2 mb-4" type="text" id="p2-params">
            <label for="p2-params">Params</label>
        </div>
    </div>
    <div class="row">
        <div class="col"><input class="form-control text-center" type="text" id="p3-name"></div>
        <div class="col">
            <select class="form-control text-center" id="p3-codec">
                <option selected value="H.264">H264</option>
                <option value="AV1">AV1</option>
            </select>
        </div>
        <div class="col">
            <select class="form-control text-center" id="p3-type">
                <option selected value="ANY">ANY</option>
                <option value="CPU">CPU</option>
                <option value="HDW">Hardware</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p3-width"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p3-height"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p3-fps"></div>
        <div class="col">
            <select class="form-control text-center" id="p3-color-depth">
                <option selected value="0">8</option>
                <option value="2">10</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p3-crf" value="30"></div>
        <div class="col"><input class="form-control text-center" type="text" id="p3-preset" value="10"></div>
    </div>
    <div class="row">
        <div class="col-12 form-floating">
            <input class="form-control mt-2 mb-4" type="text" id="p3-params">
            <label for="p3-params">Params</label>
        </div>
    </div>
    <div class="row">
        <div class="col"><input class="form-control text-center" type="text" id="p4-name"></div>
        <div class="col">
            <select class="form-control text-center" id="p4-codec">
                <option selected value="H.264">H264</option>
                <option value="AV1">AV1</option>
            </select>
        </div>
        <div class="col">
            <select class="form-control text-center" id="p4-type">
                <option selected value="ANY">ANY</option>
                <option value="CPU">CPU</option>
                <option value="HDW">Hardware</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p4-width"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p4-height"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p4-fps"></div>
        <div class="col">
            <select class="form-control text-center" id="p4-color-depth">
                <option selected value="0">8</option>
                <option value="2">10</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p4-crf" value="30"></div>
        <div class="col"><input class="form-control text-center" type="text" id="p4-preset" value="10"></div>
    </div>
    <div class="row">
        <div class="col-12 form-floating">
            <input class="form-control mt-2 mb-4" type="text" id="p4-params">
            <label for="p4-params">Params</label>
        </div>
    </div>
    <div class="row">
        <div class="col"><input class="form-control text-center" type="text" id="p5-name"></div>
        <div class="col">
            <select class="form-control text-center" id="p5-codec">
                <option selected value="H.264">H264</option>
                <option value="AV1">AV1</option>
            </select>
        </div>
        <div class="col">
            <select class="form-control text-center" id="p5-type">
                <option selected value="ANY">ANY</option>
                <option value="CPU">CPU</option>
                <option value="HDW">Hardware</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p5-width"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p5-height"></div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p5-fps"></div>
        <div class="col">
            <select class="form-control text-center" id="p5-color-depth">
                <option selected value="0">8</option>
                <option value="2">10</option>
            </select>
        </div>
        <div class="col"><input class="form-control text-center" type="number" step="1" id="p5-crf" value="30"></div>
        <div class="col"><input class="form-control text-center" type="text" id="p5-preset" value="10"></div>
    </div>
    <div class="row">
        <div class="col-12 form-floating">
            <input class="form-control mt-2 mb-4" type="text" id="p5-params">
            <label for="p5-params">Params</label>
        </div>
    </div>
</div>
<script>
    function getProfiles() {
        var profiles = [];
        for (p = 1; p <= 5; p++) {
            var prof = {};
            prof["name"] = document.querySelector("#p" + p + "-name").value;
            prof["width"] = parseInt(document.querySelector("#p" + p + "-width").value);
            prof["height"] = parseInt(document.querySelector("#p" + p + "-height").value);
            let fps = parseInt(document.querySelector("#p" + p + "-fps").value);
            if (fps > 0) {
                prof["fps"] = fps;
            }
            //prof["bitrate"] use the params field
            //prof["profile"]  use the params field
            //prof["gop"] use the params field
            prof["colorDepth"] = parseInt(document.querySelector("#p" + p + "-color-depth").value);
            prof["encoder"] = document.querySelector("#p" + p + "-codec").value;
            let q = parseInt(document.querySelector("#p" + p + "-crf").value);
            if (q > 0) {
                prof["quality"] = q;
            }
            let params = document.querySelector("#p" + p + "-params").value;
            if (params != "") {
                prof["av1Params"]
            }

            prof["av1Preset"] = parseInt(document.querySelector("#p" + p + "-preset").value);

            console.log(prof["name"])
            if (validateProfile(prof) == true) {
                profiles.push(prof);
            }

        }

        return profiles
    }

    function validateProfile(prof) {
        if (prof["name"] == "") {
            return false
        }

        if (prof["width"] < 144) {
            return false
        }

        if (prof["height"] < 144) {
            return false
        }

        return true
    }
</script>
{{ end }}